Negotiation Environment Generation
===
Describes the controller and agents generation process

Controller, negotiating and system agents are all generated by a set of macro, defined at 
[spec.macros.impl.ControllerMacro](comm-lite/src/main/scala/feh/tec/agents/lite/spec/macros/impl/ControllerMacro.scala).

The macros work by applying transformations, called `MacroSegment`, to AST trees in 
[ControllerBuildingMacroEnvironment#Trees](comm-lite/src/main/scala/feh/tec/agents/lite/spec/macros/ControllerBuildingMacroEnvironment.scala)
and [ActorBuildingMacro#ActorTrees](comm-lite/src/main/scala/feh/tec/agents/lite/spec/macros/ActorBuildingMacro.scala)
containers. ([API](http://fehu.github.io/agent-negotiation/unidoc/index.html#feh.tec.agents.lite.spec.macros.package))

Many of the segments use 
[NegotiationBuildingMacro#NegotiationRaw](comm-lite/src/main/scala/feh/tec/agents/lite/spec/macros/NegotiationBuildingMacro.scala)(*Negotiation Raw Definition*),
that contains the definitions from the processed [Negotiation](comm-lite/src/main/scala/feh/tec/agents/lite/spec/dsl/Negotiation.scala). 

![Negotiation Steps Decomposition](https://docs.google.com/uc?authuser=0&id=0B9XpukXOfywNSDdSekVrVzhIUHc)

A [ControllerBuildingMacroEnvironment#MacroSegments](comm-lite/src/main/scala/feh/tec/agents/lite/spec/macros/ControllerBuildingMacroEnvironment.scala)
groups `MacroSegment`s by stages and defines `stagesOrdering: Ordering[Stage]` used to determine stages order when forming single macro fragment.

![Macro Stages](https://docs.google.com/uc?authuser=0&id=0B9XpukXOfywNNjhjYlNmNWRadFk)

