[x] constraints must be refactored to support separate condition tests
[x] agent reporting for light
[ ] connect web backend
[x] provide constraints checking helper