[x] constraints must be refactored to support separate condition tests
[x] agent reporting for light
[ ] connect web backend
[ ] provide constraints checking helper